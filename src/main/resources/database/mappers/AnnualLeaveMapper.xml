<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.coffice.app.events.vacation.AnnualLeaveDAO">
  
	<select id="getAnnualLeaves" parameterType="AnnualLeaveVO" resultType="java.util.Map">
			SELECT
				SUM(USED_LEAVE)							AS USED,
				SUM(GRANT_LEAVE)						AS `GRANT`,
				SUM(GRANT_LEAVE) - SUM(USED_LEAVE)		AS REMAIN
			FROM
				ANNUAL_LEAVE
			WHERE
				USER_ID = #{userId}
				AND
				LEAVE_YEAR = #{leaveYear}
	</select>
  	
  </mapper>